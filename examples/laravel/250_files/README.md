## Label App

Laravel 8, PHP 8, sqlite

## Конфигурирование

Приложение конфигурируется переменными окружения

- `SQLITE_FILE` — путь до файла базы SQLite

## БД

Храним одну таблицу, `labels`. В таблице две колонки:

- `id`
- `label`

## API

Все API могут выдать сообщение об ошибке вида

```json
{
  "result": "error",
  "comment": "описание ошибки"
}
```

Точный текст ошибки может отличаться, в ответе могут присутствовать дополнительные поля

### GET /api/labels — список лейблов в базе

Выдаёт список всех лейблов в базе. Без пагинации, фильтрации и т.п.

```json
[
    {
        "id": 1, 
        "label": "xxx"
    }
]
```
Или пустой список

```json
[]
```


### POST /api/labels — добавление лейбла

Атрибутами получает описание лейбла:

- `label` — строка

Атрибуты передаются в теле запроса в формате `x-www-form-urlencoded`.

Возвращает описание лейбла, как он теперь хранится в базе

```json
{
  "id": 1,
  "label": "xxx"
}
```

Или сообщение об ошибке

### GET /api/labels/<id> — описание лейбла

Возвращает описание лейбла

```json
{
  "id": 1, 
  "label": "xxx"
}
```

Или сообщение об ошибке

```json
{
  "result": "error",
  "comment": "entry not found"
}
```

### POST /api/labels/<id> — изменение лейбла

Атрибутами получает описание лейбла:

- `label` — строка

Атрибуты передаются в теле запроса в формате `x-www-form-urlencoded`.

Возвращает описание лейбла, как он теперь хранится в базе

```json
{
  "id": 1,
  "label": "xxx"
}
```

Или сообщение об ошибке

```json
{
  "result": "error",
  "comment": "entry not found"
}
```

### DELETE /api/labels/<id> — удаление лейбла

Возвращает сообщение об успешной операции

```json
{"result": true}
```

Или сообщение об ошибке.

#### GET /api/generate_report — создать отчёт

Сохраняет отчёт в бакете на s3. Возвращает сообщение об успешной операции

```json
{"result": true}
```

Или сообщение об ошибке.
