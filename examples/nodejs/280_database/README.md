# demo app

Приложение, хранящее список лейблов. В качестве места хранения используется БД Redis.

Сделано по-минимуму, без валидаций, фильтраций и т.п. API обеспечивает простейший CRUD сущности с одним полем. В коде гарантированно есть уязвимости и ошибки.

## Конфигурирование

Приложение конфигурируется переменными окружения

- `REDIS_PORT` — порт бд Redis 
- `REDIS_HOST` — хост-имя бд Redis

## БД

Храним одну таблицу, `labels`. В таблице две колонки:

- `id`
- `label`

## API

Все API могут выдать сообщение об ошибке вида

```json
{
  "result": "error",
  "comment": "table labels not found"
}
```

Точный текст ошибки может отличаться, в ответе могут присутствовать дополнительные поля

### GET /api/labels — список лейблов в базе

Выдаёт список всех лейблов в базе. Без пагинации, фильтрации и т.п.

```json
[
    {
        "id": 1, 
        "label": "xxx"
    }
]
```

или пустой список

```json
[]
```


### POST /api/labels — добавление лейбла

Атрибутами получает описание лейбла:

- `label` — строка

Атрибуты передаются в теле запроса в формате `x-www-form-urlencoded`.

Возвращает описание лейбла, как он теперь хранится в базе

```json
{
  "id": 1,
  "label": "xxx"
}
```

Или сообщение об ошибке

### GET /api/labels/<id> — описание лейбла

Возвращает описание лейбла

```json
{
  "id": 1, 
  "label": "xxx"
}
```

Или сообщение об ошибке

```json
{
  "result": "error",
  "comment": "entry not found"
}
```

### POST /api/labels/<id> — изменение лейбла

Атрибутами получает описание лейбла:

- `label` — строка

Атрибуты передаются в теле запроса в формате `x-www-form-urlencoded`.

Возвращает описание лейбла, как он теперь хранится в базе

```json
{
  "id": 1,
  "label": "xxx"
}
```

Или сообщение об ошибке

```json
{
  "result": "error",
  "comment": "entry not found"
}
```

### DELETE /api/labels/<id> — удаление лейбла

Возвращает сообщение об успешной операции

```json
{"result": true}
```

Или сообщение об ошибке.
