### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ minikube

–£—Å—Ç–∞–Ω–æ–≤–∏–º/–æ–±–Ω–æ–≤–∏–º minikube, [—Å–ª–µ–¥—É—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –ø—Ä–æ–µ–∫—Ç–∞](https://minikube.sigs.k8s.io/docs/start/). –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ —É –Ω–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∞–º–∞—è —Å–≤–µ–∂–∞—è –≤–µ—Ä—Å–∏—è minikube, –¥–æ—Å—Ç—É–ø–Ω–∞—è –ø–æ –ø—Ä–∏–≤–µ–¥—ë–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ.

–°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π Kubernetes-–∫–ª–∞—Å—Ç–µ—Ä —Å minikube:
```powershell
# —É–¥–∞–ª–∏–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π minikube-–∫–ª–∞—Å—Ç–µ—Ä (–µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å)
minikube delete
# –∑–∞–ø—É—Å—Ç–∏–º –Ω–æ–≤—ã–π minikube-–∫–ª–∞—Å—Ç–µ—Ä
minikube start --driver=docker
```

–í—ã—Å—Ç–∞–≤–∏–º Namespace –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —á—Ç–æ–±—ã –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å –µ–≥–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `kubectl`:
```powershell
kubectl config set-context minikube --namespace=werf-guide-app
```

–í –æ—Ç–≤–µ—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–µ:
```powershell
Context "minikube" modified.
```

–ï—Å–ª–∏ —É—Ç–∏–ª–∏—Ç–∞ kubectl –≤—Å—ë –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, —Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏–º –µ—ë, [—Å–ª–µ–¥—É—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º](https://kubernetes.io/docs/tasks/tools/install-kubectl-windows/).

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–∏–º —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –Ω–æ–≤–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kubernetes, –∞ —Ç–æ—á–Ω–µ–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö Pod'–æ–≤, –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ:
```powershell
kubectl get --all-namespaces pod
```

–í –æ—Ç–≤–µ—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ:
```powershell
NAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE
kube-system   coredns-558bd4d5db-8jfng           1/1     Running   0          48s
kube-system   etcd-minikube                      1/1     Running   0          61s
kube-system   kube-apiserver-minikube            1/1     Running   0          54s
kube-system   kube-controller-manager-minikube   1/1     Running   0          54s
kube-system   kube-proxy-b87f2                   1/1     Running   0          48s
kube-system   kube-scheduler-minikube            1/1     Running   0          65s
kube-system   storage-provisioner                1/1     Running   0          56s
```

–ö–ª–∞—Å—Ç–µ—Ä Kubernetes –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ –æ–±–∞ —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è:
* –≤ 4-–º —Å—Ç–æ–ª–±—Ü–µ –≤—Å–µ Pod'—ã –∏–∑ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö `Running` –∏–ª–∏ `Completed`;
* –≤ 3-–º —Å—Ç–æ–ª–±—Ü–µ –¥–ª—è –≤—Å–µ—Ö Pod'–æ–≤ –≤ `Running` —á–∏—Å–ª–æ —Å–ª–µ–≤–∞ (`X`) –æ—Ç `/` —Ä–∞–≤–Ω–æ —á–∏—Å–ª—É —Å–ø—Ä–∞–≤–∞ (`Y`) –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö –≤—Ä–æ–¥–µ `X/Y` (—Ç.–µ. –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã Pod'–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—å).

–ï—Å–ª–∏ –Ω–µ –≤—Å–µ Pod'—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—å, —Ç–æ –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∏ —Å–Ω–æ–≤–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –≤—ã—à–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö Pod'–æ–≤.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ NGINX Ingress Controller

–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º NGINX Ingress Controller:
```powershell
minikube addons enable ingress
```

–í –æ—Ç–≤–µ—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–µ:
```powershell
...
üîé  Verifying ingress addon...
üåü  The 'ingress' addon is enabled
```

–ù–µ–º–Ω–æ–≥–æ –ø–æ–¥–æ–∂–¥—ë–º, –ø–æ—Å–ª–µ —á–µ–≥–æ —É–±–µ–¥–∏–º—Å—è, —á—Ç–æ Ingress Controller —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è:
```powershell
kubectl -n ingress-nginx get pod
```

–í –æ—Ç–≤–µ—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ:
```powershell
NAME                                        READY   STATUS      RESTARTS   AGE
ingress-nginx-admission-create-qrcdg        0/1     Completed   0          8m12s
ingress-nginx-admission-patch-8pw4d         0/1     Completed   0          8m12s
ingress-nginx-controller-59b45fb494-fscgf   1/1     Running     0          8m12s
```

–°–¥–µ–ª–∞–µ–º NGINX Ingress Controller –¥–æ—Å—Ç—É–ø–Ω—ã–º –Ω–∞ 80-–º –ø–æ—Ä—Ç—É –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `minikube tunnel`:
```powershell
kubectl expose service -n ingress-nginx ingress-nginx-controller --name ingress-nginx-controller-lb --type LoadBalancer --port 80 --target-port http
```

–í–∞–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ –Ω–µ –∑–∞–Ω—è—Ç 80-–π –ø–æ—Ä—Ç. –°–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–¥–∞—Ç—å –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```powershell
netstat -anb | grep :80
```

–í —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç, —Ç–æ –≤ –æ—Ç–≤–µ—Ç –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ:

```powershell
TCP     0.0.0.0:80        0.0.0.0:0       LISTENING
TCP     [::]:80           [::]:0          LISTENING
```

‚Äî –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–π—Ç–∏ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä.

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω–∞–¥–æ –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –¥–µ—Ä–∂–∞—Ç—å –∑–∞–ø—É—â–µ–Ω–Ω—ã–º `minikube tunnel` –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –æ–∫–Ω–µ PowerShell. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ —Å –Ω–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∞ –∫ —Ä–µ—Å—É—Ä—Å–∞–º –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ —á–µ—Ä–µ–∑ Ingress:
```powershell
minikube tunnel --cleanup=true
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ hosts

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–º–µ–Ω `werf-guide-app`. –î–ª—è —ç—Ç–æ–≥–æ –æ–±–Ω–æ–≤–∏–º —Ñ–∞–π–ª hosts (–≤ PowerShell –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞):
```powershell
Add-Content "C:\Windows\System32\drivers\etc\hosts" "`n127.0.0.1 werf-guide-app.test"
```
